!function(){function a(a,b){a.state("home",{url:"/",templateUrl:"src/partials/home.html",access:{restricted:!1}}).state("login",{url:"/login",templateUrl:"src/js/auth/login.html",controller:"loginController",access:{restricted:!1}}).state("logout",{url:"/logout",controller:"logoutController",access:{restricted:!0}}).state("register",{url:"/register",templateUrl:"src/js/auth/register.html",controller:"registerController",access:{restricted:!0}}).state("one",{url:"/one",template:"<h1>This is page one!</h1>",access:{restricted:!0}}).state("two",{url:"/two",template:"<h1>This is page two!</h1>",access:{restricted:!1}}),b.otherwise("/")}function b(a,b,c,d){a.$on("$stateChangeStart",function(a,e,f){e.access.restricted&&d.isLoggedIn()===!1&&(b.path("/login"),c.reload())})}angular.module("gifter",["ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",a]).run(["$rootScope","$location","$state","AuthService",b])}(),function(){"use strict";function a(a,b,c){console.log(c.getUserStatus()),a.login=function(){a.error=!1,a.disabled=!0,c.login(a.loginForm.username,a.loginForm.password).then(function(){b.path("/"),a.disabled=!1,a.loginForm={}})["catch"](function(){a.error=!0,a.errorMessage="Invalid username and/or password",a.disabled=!1,a.loginForm={}})}}angular.module("gifter").controller("loginController",["$scope","$location","AuthService",a])}(),function(){"use strict";function a(a,b,c){a.logout=function(){console.log(c.getUserStatus()),c.logout().then(function(){b.path("/login")})}}angular.module("gifter").controller("logoutController",["$scope","$location","AuthService",a])}(),function(){"use strict";function a(a,b,c){console.log(c.getUserStatus()),a.register=function(){a.error=!1,a.disabled=!0,c.register(a.registerForm.username,a.registerForm.password).then(function(){b.path("/login"),a.disabled=!1,a.registerForm={}})["catch"](function(){a.error=!0,a.errorMessage="Something went wrong!",a.disabled=!1,a.registerForm={}})}}angular.module("gifter").controller("registerController",["$scope","$location","AuthService",a])}(),function(){"use strict";function a(a,b,c){function d(){return i?!0:!1}function e(){return i}function f(b,d){var e=a.defer();return c.post("/user/login",{username:b,password:d}).success(function(a,b){200===b&&a.status?(i=!0,e.resolve()):(i=!1,e.reject())}).error(function(a){i=!1,e.reject()}),e.promise}function g(){var b=a.defer();return c.get("/user/logout").success(function(a){i=!1,b.resolve()}).error(function(a){i=!1,b.reject()}),b.promise}function h(b,d){var e=a.defer();return c.post("/user/register",{username:b,password:d}).success(function(a,b){200===b&&a.status?e.resolve():e.reject()}).error(function(a){e.reject()}),e.promise}var i=null;return{isLoggedIn:d,getUserStatus:e,login:f,logout:g,register:h}}angular.module("gifter").factory("AuthService",["$q","$timeout","$http",a])}();